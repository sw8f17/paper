\section{Transmitting the Data}\label{sec:transmit}
In \cref{sec:communication_methods} we decided to use WiFi Direct as our communication method.
In this section we determine a way to structure the data for network transmission.

\bigskip
The goal is for data transmission of various data types to have the least amount of overhead as possible.
We have two types of data to transmit between the devices: music data, and commands.
Music data is parts of the song itself which is streamed to the devices,
and the commands are the play, pause, stop, etc. commands sent from the master device to the slaves.
We need a method to send these two kinds of data between the devices in an efficient way,
to limit the amount of data transferred between the devices.
We desire to minimize two kinds of overhead: The size of the data, and the processing power used for serializing and deserializing.
To do this we want to use a well defined and well supported technology to do it.
Furthermore the data does not need to be human readable.

\subsection{Protocol Buffers}
This lead us to Protocol Buffers, also called Protobuf, made by Google, which is a language and platform neutral extensible mechanism for serialized structured data. 
Protobuf works by defining the way the data should be structured, this definition is then used to generate source code which can read and write the data to and from streams.\cite{protobuf}
This makes it easy to define the data structure once, and then use it throughout the code.
Google supports protobufs for C++, C\#, Go, Java and Python, but nothing stops usage in other languages\cite{protobuf}.

In regarding to speed and package size, Protobuf is, compared to XML, three to ten times smaller and 20 to 100 times faster.
This comes from among other things that protobuf is not human readable since it is encoded in a binary format.\cite{protobuf} 

Two supported versions of Protobuf exist: proto2 and proto3, where proto3 is the newest.
Proto3 have some changes from proto2, which makes it easier to implement in languages like Android Java, Objective C and Go.\cite{proto3}

Alternatives to Protobuf could be XML or JSON.
XML and JSON are both human readable data formats represented as text, and are both widely popular.
In some cases Protobuf is up to six times faster than JSON, and as mentioned previously, and up ten times faster than XML\cite{json_slow}.
In \cref{tab:format_pros_cons}, a pros and cons list of the different data formats can be seen.

\begin{table}
    \begin{tabularx}{\textwidth}{XXX}\toprule
        Data format & Pros                                          & Cons \\
        Protobuf    & Small overhead, fast                          & Not human readable \\
        JSON        & Human readable, \newline fast compared to XML & Not as fast as Protobuf\\
        XML         & Human readable                                & Large overhead and slow, slower than Protobuf and JSON \\
    \end{tabularx}
    \caption{Pros and cons of the different data formats.}\label{tab:format_pros_cons}
\end{table}

\subsection{Choosing Data Transmission Medium}
Protobuf is a language and platform neutral mechanism for serializing structured data.
It is lightweight and fast, compared to XML and JSON, which is a desired attribute when transmitting data between devices.
Low overhead and speed is important for us since we are streaming data which needs to be used quickly, as such we disregard XML and JSON, leaving us with Protobuf as the natural decision.

For our application we use proto3, since it is newer, less verbose and we expect it to be supported for a longer time period.
